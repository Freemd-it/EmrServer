2018-07-30 12:28:13: ## redis started ##
2018-07-30 12:28:14: ## Master Cluster Start ##
2018-07-30 12:28:14: ## redis started ##
2018-07-30 12:28:15: ## setup routes service ##
2018-07-30 12:28:15: ## [processRun] [pid:24775] [childNo:1] Server running at 3000 ##
2018-07-30 12:28:15: Executing (default): CREATE TABLE IF NOT EXISTS `users` (`id` INTEGER NOT NULL auto_increment , `account` VARCHAR(255) NOT NULL, `password` VARCHAR(300) NOT NULL, `permission` CHAR(4) NOT NULL, `description` VARCHAR(150), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
2018-07-30 12:28:15: Executing (default): CREATE TABLE IF NOT EXISTS `patients` (`id` INTEGER NOT NULL auto_increment , `firstVisit` DATETIME NOT NULL, `name` VARCHAR(40) NOT NULL, `gender` ENUM('male', 'female'), `birth` CHAR(10), `height` INTEGER(3), `weight` INTEGER(2), `BMI` VARCHAR(10), `smokingAmount` VARCHAR(3), `smokingPeriod` CHAR(2), `drinkingAmount` VARCHAR(3), `drinkingPeriod` VARCHAR(3), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
2018-07-30 12:28:15: Executing (default): CREATE TABLE IF NOT EXISTS `medicines` (`id` INTEGER NOT NULL auto_increment , `name` VARCHAR(40) NOT NULL, `primaryCategory` VARCHAR(100) NOT NULL, `secondaryCategory` VARCHAR(100) NOT NULL, `medication` VARCHAR(255), `property` VARCHAR(255), `ingredient` VARCHAR(100) NOT NULL, `amount` INTEGER(3) NOT NULL, `quantity` INTEGER(3) NOT NULL, `available` TINYINT(1) NOT NULL DEFAULT 1, `totalAmount` INTEGER(6) NOT NULL, `expiry` CHAR(10), `memo` VARCHAR(300), `capacity` VARCHAR(45), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
2018-07-30 12:28:15: Executing (default): CREATE TABLE IF NOT EXISTS `medicineCategories` (`id` INTEGER NOT NULL auto_increment , `primaryCategory` VARCHAR(100), `secondaryCategory` VARCHAR(100), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
2018-07-30 12:28:15: Executing (default): CREATE TABLE IF NOT EXISTS `waitings` (`id` INTEGER NOT NULL auto_increment , `chartNumber` INTEGER(11) NOT NULL, `name` VARCHAR(40) NOT NULL, `birth` CHAR(10), `status` INTEGER(1) DEFAULT 1, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
2018-07-30 12:28:15: Executing (default): SHOW INDEX FROM `users`
2018-07-30 12:28:15: Executing (default): SHOW INDEX FROM `patients`
2018-07-30 12:28:15: Executing (default): SHOW INDEX FROM `medicines`
2018-07-30 12:28:15: Executing (default): SHOW INDEX FROM `medicineCategories`
2018-07-30 12:28:15: Executing (default): SHOW INDEX FROM `waitings`
2018-07-30 12:28:15: Executing (default): CREATE TABLE IF NOT EXISTS `histories` (`id` INTEGER NOT NULL auto_increment , `pastHistory` VARCHAR(60), `pastHistoryComment` VARCHAR(255), `allergy` VARCHAR(30), `allergyComment` VARCHAR(255), `pastMedical` ENUM('Y', 'N'), `pastMedicalTime` VARCHAR(255), `pastMedicalArea` VARCHAR(255), `pastMedication` ENUM('Y', 'N'), `pastMedicationType` VARCHAR(255), `pastMedicationPeriod` VARCHAR(255), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `patient_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`patient_id`) REFERENCES `patients` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2018-07-30 12:28:15: Executing (default): CREATE TABLE IF NOT EXISTS `charts` (`id` INTEGER NOT NULL auto_increment , `chartNumber` INTEGER(12) NOT NULL, `status` INTEGER(1), `heartRate` INTEGER(3), `pulseRate` INTEGER(3), `bodyTemporature` INTEGER(3), `systoleBloodPressure` INTEGER(3), `diastoleBloodPressure` INTEGER(3), `bloodGlucose` INTEGER(3), `mealTerm` INTEGER(3), `impression` VARCHAR(300), `presentIllness` VARCHAR(300), `treatmentNote` VARCHAR(300), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `patient_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`patient_id`) REFERENCES `patients` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2018-07-30 12:28:15: Executing (default): CREATE TABLE IF NOT EXISTS `prescriptions` (`id` INTEGER NOT NULL auto_increment , `medicine_id` INTEGER(11) NOT NULL, `chartNumber` INTEGER(12) NOT NULL, `medicineName` VARCHAR(40) NOT NULL, `medicineIngredient` VARCHAR(100) NOT NULL, `doses` INTEGER(5), `dosesCountByDay` CHAR(3), `dosesDay` INTEGER(5), `useTotal` INTEGER(5) NOT NULL, `useFlag` TINYINT(1) NOT NULL DEFAULT 0, `remarks` VARCHAR(100), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`medicine_id`) REFERENCES `medicines` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`chartNumber`) REFERENCES `charts` (`chartNumber`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2018-07-30 12:28:15: Executing (default): SHOW INDEX FROM `histories`
2018-07-30 12:28:15: Executing (default): SHOW INDEX FROM `charts`
2018-07-30 12:28:15: Executing (default): CREATE TABLE IF NOT EXISTS `complaints` (`id` INTEGER NOT NULL auto_increment , `chiefComplaint` VARCHAR(255), `chiefComplaintHistory` VARCHAR(500), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `patient_id` INTEGER, `chart_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`patient_id`) REFERENCES `patients` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`chart_id`) REFERENCES `charts` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2018-07-30 12:28:15: Executing (default): CREATE TABLE IF NOT EXISTS `ocs` (`id` INTEGER NOT NULL auto_increment , `chart_id` INTEGER(11) NOT NULL, `chartNumber` INTEGER(11) NOT NULL, `name` VARCHAR(40) NOT NULL, `gender` ENUM('male', 'female') NOT NULL, `birth` CHAR(10) NOT NULL, `status` INTEGER(1) DEFAULT 1, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`chart_id`) REFERENCES `charts` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2018-07-30 12:28:15: Executing (default): SHOW INDEX FROM `complaints`
2018-07-30 12:28:15: Executing (default): SHOW INDEX FROM `ocs`
2018-07-30 12:28:15: You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
2018-07-30 12:45:06: ## [AUTH] AuthController started ##
2018-07-30 12:47:16: ## [AUTH] AuthController started ##
2018-07-30 12:47:17: ## [Receipt] ReceiptController started ##
2018-07-30 12:47:22: ## [Receipt] ReceiptController started ##
2018-07-30 12:47:25: ## [Receipt] ReceiptController started ##
2018-07-30 12:47:27: ## [Receipt] ReceiptController started ##
2018-07-30 12:47:29: ## [AUTH] AuthController started ##
2018-07-30 12:51:04: ## [AUTH] AuthController started ##
2018-07-30 12:51:21: ## [AUTH] AuthController started ##
2018-07-30 12:51:21: Executing (default): SELECT `id`, `account`, `password`, `permission`, `description`, `createdAt`, `updatedAt` FROM `users` AS `user` WHERE `user`.`account` = '0000' AND `user`.`password` = '62c96208ded9c9c90b19c44397b1da91a952afcf' LIMIT 1;
2018-07-30 12:52:52: ## [AUTH] AuthController started ##
2018-07-30 12:53:08: ## [AUTH] AuthController started ##
2018-07-30 12:55:30: ## [AUTH] AuthController started ##
2018-07-30 12:59:36: ## [AUTH] AuthController started ##
2018-07-30 13:00:55: ## [AUTH] AuthController started ##
2018-07-30 13:00:56: ## [AUTH] AuthController started ##
2018-07-30 13:00:56: ## [Receipt] ReceiptController started ##
2018-07-30 13:00:57: ## [Receipt] ReceiptController started ##
2018-07-30 13:00:59: ## [OCS] OCSController started ##
2018-07-30 13:00:59: ## [OCS] OCSController started ##
2018-07-30 13:01:00: Executing (default): SELECT count(*) AS `count` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00');
2018-07-30 13:01:00: Executing (default): SELECT `id`, `chart_id`, `chartNumber`, `name`, `gender`, `birth`, `status`, `createdAt`, `updatedAt` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00') ORDER BY `ocs`.`id` DESC LIMIT 0, 10;
2018-07-30 13:01:00: ## [Prediagnosis] PrediagnosisController started ##
2018-07-30 13:01:01: ## [OCS] OCSController started ##
2018-07-30 13:01:01: ## [OCS] OCSController started ##
2018-07-30 13:01:01: Executing (default): SELECT count(*) AS `count` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00');
2018-07-30 13:01:01: Executing (default): SELECT `id`, `chart_id`, `chartNumber`, `name`, `gender`, `birth`, `status`, `createdAt`, `updatedAt` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00') ORDER BY `ocs`.`id` DESC LIMIT 0, 10;
2018-07-30 13:01:03: ## [Chart] ChartController started ##
2018-07-30 13:01:03: ## [Medicine] MedicineController started ##
2018-07-30 13:01:03: Executing (default): SELECT `id`, `name`, `primaryCategory`, `secondaryCategory`, `medication`, `property`, `ingredient`, `amount`, `quantity`, `available` FROM `medicines` AS `medicine` WHERE `medicine`.`available` = 1;
2018-07-30 13:01:03: ## [WaitList] WaitController started ##
2018-07-30 13:01:03: Executing (default): SELECT count(*) AS `count` FROM `waitings` AS `waiting` WHERE `waiting`.`createdAt` > '2018-07-30 09:00:00';
2018-07-30 13:01:03: Executing (default): SELECT `id`, `chartNumber`, `name`, `birth`, `status`, `createdAt`, `updatedAt` FROM `waitings` AS `waiting` WHERE `waiting`.`createdAt` > '2018-07-30 09:00:00' AND `waiting`.`status` != 7 ORDER BY `waiting`.`chartNumber` ASC LIMIT 0, 15;
2018-07-30 13:01:07: ## [Prediagnosis] PrediagnosisController started ##
2018-07-30 13:01:08: ## [OCS] OCSController started ##
2018-07-30 13:01:08: ## [OCS] OCSController started ##
2018-07-30 13:01:08: Executing (default): SELECT count(*) AS `count` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00');
2018-07-30 13:01:08: Executing (default): SELECT `id`, `chart_id`, `chartNumber`, `name`, `gender`, `birth`, `status`, `createdAt`, `updatedAt` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00') ORDER BY `ocs`.`id` DESC LIMIT 0, 10;
2018-07-30 13:01:09: ## [Receipt] ReceiptController started ##
2018-07-30 13:01:11: ## [Receipt] ReceiptController started ##
2018-07-30 13:01:11: Executing (default): SELECT `patient`.`id`, `patient`.`name`, `patient`.`bmi`, `patient`.`birth`, `patient`.`height`, `patient`.`weight`, `patient`.`createdAt`, `patient`.`gender`, `patient`.`drinkingAmount`, `patient`.`smokingAmount`, `patient`.`smokingPeriod`, `patient`.`drinkingPeriod`, `patient`.`firstVisit`, `histories`.`id` AS `histories.id`, `histories`.`pastHistory` AS `histories.pastHistory`, `histories`.`pastHistoryComment` AS `histories.pastHistoryComment`, `histories`.`allergy` AS `histories.allergy`, `histories`.`allergyComment` AS `histories.allergyComment`, `histories`.`pastMedical` AS `histories.pastMedical`, `histories`.`pastMedicalTime` AS `histories.pastMedicalTime`, `histories`.`pastMedicalArea` AS `histories.pastMedicalArea`, `histories`.`pastMedication` AS `histories.pastMedication`, `histories`.`pastMedicationType` AS `histories.pastMedicationType`, `histories`.`pastMedicationPeriod` AS `histories.pastMedicationPeriod`, `histories`.`createdAt` AS `histories.createdAt`, `histories`.`updatedAt` AS `histories.updatedAt`, `histories`.`patient_id` AS `histories.patient_id` FROM `patients` AS `patient` LEFT OUTER JOIN `histories` AS `histories` ON `patient`.`id` = `histories`.`patient_id` WHERE `patient`.`name` = '아';
2018-07-30 13:01:14: ## [Receipt] ReceiptController started ##
2018-07-30 13:01:14: Executing (default): SELECT `patient`.`id`, `patient`.`name`, `patient`.`bmi`, `patient`.`birth`, `patient`.`height`, `patient`.`weight`, `patient`.`createdAt`, `patient`.`gender`, `patient`.`drinkingAmount`, `patient`.`smokingAmount`, `patient`.`smokingPeriod`, `patient`.`drinkingPeriod`, `patient`.`firstVisit`, `histories`.`id` AS `histories.id`, `histories`.`pastHistory` AS `histories.pastHistory`, `histories`.`pastHistoryComment` AS `histories.pastHistoryComment`, `histories`.`allergy` AS `histories.allergy`, `histories`.`allergyComment` AS `histories.allergyComment`, `histories`.`pastMedical` AS `histories.pastMedical`, `histories`.`pastMedicalTime` AS `histories.pastMedicalTime`, `histories`.`pastMedicalArea` AS `histories.pastMedicalArea`, `histories`.`pastMedication` AS `histories.pastMedication`, `histories`.`pastMedicationType` AS `histories.pastMedicationType`, `histories`.`pastMedicationPeriod` AS `histories.pastMedicationPeriod`, `histories`.`createdAt` AS `histories.createdAt`, `histories`.`updatedAt` AS `histories.updatedAt`, `histories`.`patient_id` AS `histories.patient_id` FROM `patients` AS `patient` LEFT OUTER JOIN `histories` AS `histories` ON `patient`.`id` = `histories`.`patient_id` WHERE `patient`.`name` = '아이아';
2018-07-30 13:01:15: ## [Receipt] ReceiptController started ##
2018-07-30 13:01:15: Executing (default): SELECT `patient`.`id`, `patient`.`name`, `patient`.`bmi`, `patient`.`birth`, `patient`.`height`, `patient`.`weight`, `patient`.`createdAt`, `patient`.`gender`, `patient`.`drinkingAmount`, `patient`.`smokingAmount`, `patient`.`smokingPeriod`, `patient`.`drinkingPeriod`, `patient`.`firstVisit`, `histories`.`id` AS `histories.id`, `histories`.`pastHistory` AS `histories.pastHistory`, `histories`.`pastHistoryComment` AS `histories.pastHistoryComment`, `histories`.`allergy` AS `histories.allergy`, `histories`.`allergyComment` AS `histories.allergyComment`, `histories`.`pastMedical` AS `histories.pastMedical`, `histories`.`pastMedicalTime` AS `histories.pastMedicalTime`, `histories`.`pastMedicalArea` AS `histories.pastMedicalArea`, `histories`.`pastMedication` AS `histories.pastMedication`, `histories`.`pastMedicationType` AS `histories.pastMedicationType`, `histories`.`pastMedicationPeriod` AS `histories.pastMedicationPeriod`, `histories`.`createdAt` AS `histories.createdAt`, `histories`.`updatedAt` AS `histories.updatedAt`, `histories`.`patient_id` AS `histories.patient_id` FROM `patients` AS `patient` LEFT OUTER JOIN `histories` AS `histories` ON `patient`.`id` = `histories`.`patient_id` WHERE `patient`.`name` = '호호';
2018-07-30 13:01:17: ## [Receipt] ReceiptController started ##
2018-07-30 13:01:22: ## [OCS] OCSController started ##
2018-07-30 13:01:22: ## [OCS] OCSController started ##
2018-07-30 13:01:22: Executing (default): SELECT count(*) AS `count` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00');
2018-07-30 13:01:22: Executing (default): SELECT `id`, `chart_id`, `chartNumber`, `name`, `gender`, `birth`, `status`, `createdAt`, `updatedAt` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00') ORDER BY `ocs`.`id` DESC LIMIT 0, 10;
2018-07-30 13:01:26: ## [OCS] OCSController started ##
2018-07-30 13:01:26: Executing (default): SELECT `chartNumber`, `name`, `gender`, `birth`, `status`, `createdAt` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00') ORDER BY `ocs`.`id` DESC;
2018-07-30 13:01:28: ## [OCS] OCSController started ##
2018-07-30 13:01:28: Executing (default): SELECT `chartNumber`, `name`, `gender`, `birth`, `status`, `createdAt` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00') ORDER BY `ocs`.`id` DESC;
2018-07-30 13:01:34: ## [OCS] OCSController started ##
2018-07-30 13:01:34: Executing (default): SELECT count(*) AS `count` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00');
2018-07-30 13:01:34: Executing (default): SELECT `id`, `chart_id`, `chartNumber`, `name`, `gender`, `birth`, `status`, `createdAt`, `updatedAt` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00') ORDER BY `ocs`.`id` DESC LIMIT 0, 10;
2018-07-30 13:01:35: ## [OCS] OCSController started ##
2018-07-30 13:01:35: Executing (default): SELECT `chartNumber`, `name`, `gender`, `birth`, `status`, `createdAt` FROM `ocs` AS `ocs` WHERE (`ocs`.`createdAt` >= '2018-07-30 09:00:00' AND `ocs`.`createdAt` < '2018-07-31 09:00:00') ORDER BY `ocs`.`id` DESC;
2018-07-30 13:01:36: ## [Receipt] ReceiptController started ##
2018-07-30 13:02:10: ## [Prediagnosis] PrediagnosisController started ##
2018-07-30 13:02:23: ## [Chart] ChartController started ##
2018-07-30 13:02:23: ## [Medicine] MedicineController started ##
2018-07-30 13:02:23: ## [WaitList] WaitController started ##
2018-07-30 13:02:23: Executing (default): SELECT `id`, `name`, `primaryCategory`, `secondaryCategory`, `medication`, `property`, `ingredient`, `amount`, `quantity`, `available` FROM `medicines` AS `medicine` WHERE `medicine`.`available` = 1;
2018-07-30 13:02:23: Executing (default): SELECT count(*) AS `count` FROM `waitings` AS `waiting` WHERE `waiting`.`createdAt` > '2018-07-30 09:00:00';
2018-07-30 13:02:23: Executing (default): SELECT `id`, `chartNumber`, `name`, `birth`, `status`, `createdAt`, `updatedAt` FROM `waitings` AS `waiting` WHERE `waiting`.`createdAt` > '2018-07-30 09:00:00' AND `waiting`.`status` != 7 ORDER BY `waiting`.`chartNumber` ASC LIMIT 0, 15;
2018-07-30 13:02:43: ## [Prediagnosis] PrediagnosisController started ##
2018-07-30 13:02:43: ## [Receipt] ReceiptController started ##
2018-07-30 13:04:20: ## [AUTH] AuthController started ##
2018-07-31 01:22:15: ## redis started ##
2018-07-31 01:22:16: ## Master Cluster Start ##
2018-07-31 01:22:16: ## redis started ##
2018-07-31 01:22:17: ## setup routes service ##
2018-07-31 01:22:17: ## [processRun] [pid:16247] [childNo:1] Server running at 3000 ##
2018-07-31 01:22:17: Executing (default): CREATE TABLE IF NOT EXISTS `users` (`id` INTEGER NOT NULL auto_increment , `account` VARCHAR(255) NOT NULL, `password` VARCHAR(300) NOT NULL, `permission` CHAR(4) NOT NULL, `description` VARCHAR(150), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
2018-07-31 01:22:17: Executing (default): CREATE TABLE IF NOT EXISTS `patients` (`id` INTEGER NOT NULL auto_increment , `firstVisit` DATETIME NOT NULL, `name` VARCHAR(40) NOT NULL, `gender` ENUM('male', 'female'), `birth` CHAR(10), `height` INTEGER(3), `weight` INTEGER(2), `BMI` VARCHAR(10), `smokingAmount` VARCHAR(3), `smokingPeriod` CHAR(2), `drinkingAmount` VARCHAR(3), `drinkingPeriod` VARCHAR(3), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
2018-07-31 01:22:17: Executing (default): CREATE TABLE IF NOT EXISTS `medicines` (`id` INTEGER NOT NULL auto_increment , `name` VARCHAR(40) NOT NULL, `primaryCategory` VARCHAR(100) NOT NULL, `secondaryCategory` VARCHAR(100) NOT NULL, `medication` VARCHAR(255), `property` VARCHAR(255), `ingredient` VARCHAR(100) NOT NULL, `amount` INTEGER(3) NOT NULL, `quantity` INTEGER(3) NOT NULL, `available` TINYINT(1) NOT NULL DEFAULT 1, `totalAmount` INTEGER(6) NOT NULL, `expiry` CHAR(10), `memo` VARCHAR(300), `capacity` VARCHAR(45), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
2018-07-31 01:22:17: Executing (default): CREATE TABLE IF NOT EXISTS `medicineCategories` (`id` INTEGER NOT NULL auto_increment , `primaryCategory` VARCHAR(100), `secondaryCategory` VARCHAR(100), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
2018-07-31 01:22:17: Executing (default): CREATE TABLE IF NOT EXISTS `waitings` (`id` INTEGER NOT NULL auto_increment , `chartNumber` INTEGER(11) NOT NULL, `name` VARCHAR(40) NOT NULL, `birth` CHAR(10), `status` INTEGER(1) DEFAULT 1, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
2018-07-31 01:22:17: Executing (default): SHOW INDEX FROM `patients`
2018-07-31 01:22:17: Executing (default): SHOW INDEX FROM `users`
2018-07-31 01:22:17: Executing (default): SHOW INDEX FROM `medicines`
2018-07-31 01:22:17: Executing (default): SHOW INDEX FROM `medicineCategories`
2018-07-31 01:22:17: Executing (default): CREATE TABLE IF NOT EXISTS `histories` (`id` INTEGER NOT NULL auto_increment , `pastHistory` VARCHAR(60), `pastHistoryComment` VARCHAR(255), `allergy` VARCHAR(30), `allergyComment` VARCHAR(255), `pastMedical` ENUM('Y', 'N'), `pastMedicalTime` VARCHAR(255), `pastMedicalArea` VARCHAR(255), `pastMedication` ENUM('Y', 'N'), `pastMedicationType` VARCHAR(255), `pastMedicationPeriod` VARCHAR(255), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `patient_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`patient_id`) REFERENCES `patients` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2018-07-31 01:22:17: Executing (default): CREATE TABLE IF NOT EXISTS `charts` (`id` INTEGER NOT NULL auto_increment , `chartNumber` INTEGER(12) NOT NULL, `status` INTEGER(1), `heartRate` INTEGER(3), `pulseRate` INTEGER(3), `bodyTemporature` INTEGER(3), `systoleBloodPressure` INTEGER(3), `diastoleBloodPressure` INTEGER(3), `bloodGlucose` INTEGER(3), `mealTerm` INTEGER(3), `impression` VARCHAR(300), `presentIllness` VARCHAR(300), `treatmentNote` VARCHAR(300), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `patient_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`patient_id`) REFERENCES `patients` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2018-07-31 01:22:17: Executing (default): SHOW INDEX FROM `waitings`
2018-07-31 01:22:17: Executing (default): CREATE TABLE IF NOT EXISTS `prescriptions` (`id` INTEGER NOT NULL auto_increment , `medicine_id` INTEGER(11) NOT NULL, `chartNumber` INTEGER(12) NOT NULL, `medicineName` VARCHAR(40) NOT NULL, `medicineIngredient` VARCHAR(100) NOT NULL, `doses` INTEGER(5), `dosesCountByDay` CHAR(3), `dosesDay` INTEGER(5), `useTotal` INTEGER(5) NOT NULL, `useFlag` TINYINT(1) NOT NULL DEFAULT 0, `remarks` VARCHAR(100), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`medicine_id`) REFERENCES `medicines` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`chartNumber`) REFERENCES `charts` (`chartNumber`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2018-07-31 01:22:17: Executing (default): SHOW INDEX FROM `histories`
2018-07-31 01:22:17: Executing (default): SHOW INDEX FROM `charts`
2018-07-31 01:22:17: Executing (default): CREATE TABLE IF NOT EXISTS `complaints` (`id` INTEGER NOT NULL auto_increment , `chiefComplaint` VARCHAR(255), `chiefComplaintHistory` VARCHAR(500), `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `patient_id` INTEGER, `chart_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`patient_id`) REFERENCES `patients` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`chart_id`) REFERENCES `charts` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2018-07-31 01:22:17: Executing (default): CREATE TABLE IF NOT EXISTS `ocs` (`id` INTEGER NOT NULL auto_increment , `chart_id` INTEGER(11) NOT NULL, `chartNumber` INTEGER(11) NOT NULL, `name` VARCHAR(40) NOT NULL, `gender` ENUM('male', 'female') NOT NULL, `birth` CHAR(10) NOT NULL, `status` INTEGER(1) DEFAULT 1, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`chart_id`) REFERENCES `charts` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2018-07-31 01:22:17: Executing (default): SHOW INDEX FROM `complaints`
2018-07-31 01:22:17: Executing (default): SHOW INDEX FROM `ocs`
