{"version":3,"sources":["../../Service/RoutesService.js"],"names":["csurf","require","util","config","kakaoTalkMessageController","iotKakaoTalkMessageController","csrfProtection","cookie","RoutesService","Init","app","get","use","console","log","format","req","res","next","originalUrl","ip","module","exports"],"mappings":";;AAAA,IAAIA,QAAQC,QAAQ,OAAR,CAAZ;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;;AAEA,IAAIE,SAASF,QAAQ,qBAAR,CAAb;AACA,IAAIG,6BAA6BH,QAAQ,6CAAR,CAAjC;AACA,IAAII,gCAAgCJ,QAAQ,gDAAR,CAApC;;AAEA,IAAIK,iBAAiB,IAAIN,KAAJ,CAAU,EAAEO,QAAQ,IAAV,EAAV,CAArB;;AAEA,IAAIC,gBAAgB,SAAhBA,aAAgB,GAAU,CAAE,CAAhC;;AAEAA,cAAcC,IAAd,GAAqB,YAAU;;AAE3B,QAAIC,IAAIC,GAAJ,CAAQ,KAAR,MAAmB,YAAvB,EAAoC;;AAEhCD,YAAIE,GAAJ,CAAQN,cAAR;AACAO,gBAAQC,GAAR,CAAYZ,KAAKa,MAAL,CAAY,qBAAZ,CAAZ;AACH;;AAEDL,QAAIE,GAAJ,CAAQ,SAASE,GAAT,CAAaE,GAAb,EAAkBC,GAAlB,EAAuBC,IAAvB,EAA4B;;AAEhCL,gBAAQC,GAAR,CAAYZ,KAAKa,MAAL,CAAY,0BAAZ,EAAwCC,IAAIG,WAA5C,EAAyDH,IAAII,EAA7D,CAAZ;AACAF;AACH,KAJD;;AAMAR,QAAIE,GAAJ,CAAQ,QAAR,EAAkBR,0BAAlB;AACAM,QAAIE,GAAJ,CAAQ,MAAR,EAAgBP,6BAAhB;;AAEAQ,YAAQC,GAAR,CAAY,oBAAZ;AACH,CAlBD;;AAoBAO,OAAOC,OAAP,GAAiBd,aAAjB","file":"RoutesService.js","sourcesContent":["var csurf = require('csurf');\r\nvar util = require('util');\r\n\r\nvar config = require('../Common/Config.js');\r\nvar kakaoTalkMessageController = require('../Controller/KakaoTalkMessageController.js');\r\nvar iotKakaoTalkMessageController = require('../Controller/IotKakaoTalkMessageController.js');\r\n\r\nvar csrfProtection = new csurf({ cookie: true });\r\n\r\nvar RoutesService = function(){};\r\n\r\nRoutesService.Init = function(){\r\n\r\n    if (app.get('env') === 'production'){\r\n\r\n        app.use(csrfProtection);\r\n        console.log(util.format('Use Middleware csrf'));\r\n    }\r\n\r\n    app.use(function log(req, res, next){\r\n\r\n        console.log(util.format(\"## URL : %s / IP : %s ##\", req.originalUrl, req.ip));\r\n        next();\r\n    });\r\n\r\n    app.use('/kakao', kakaoTalkMessageController);\r\n    app.use('/iot', iotKakaoTalkMessageController);\r\n\r\n    console.log(\"## setup routes ##\");\r\n}\r\n\r\nmodule.exports = RoutesService;\r\n"]}