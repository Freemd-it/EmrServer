{"version":3,"sources":["../../Service/RedisService.js"],"names":["ioRedis","require","util","config","RedisService","Init","workerId","redis","port","redisConfig","redisPort","host","redisHost","db","retryStrategy","times","delay","Math","min","console","log","format","module","exports"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;AACA,IAAIE,SAASF,QAAQ,qBAAR,CAAb;;AAEA,IAAIG,eAAe,SAAfA,YAAe,GAAU,CAAE,CAA/B;;AAEAA,aAAaC,IAAb,GAAoB,UAASC,QAAT,EAAkB;;AAElC,SAAKC,KAAL,GAAa,IAAIP,OAAJ,CACb;AACIQ,cAAML,OAAOM,WAAP,CAAmBC,SAD7B;AAEIC,cAAMR,OAAOM,WAAP,CAAmBG,SAF7B;AAGI;AACAC,YAAI,CAJR;;AAMIC,uBAAe,uBAAUC,KAAV,EAAiB;AAC5B,gBAAIC,QAAQC,KAAKC,GAAL,CAASH,QAAQ,CAAjB,EAAoB,IAApB,CAAZ;AACAI,oBAAQC,GAAR,CAAYJ,KAAZ;AACA,mBAAOA,KAAP;AACH;AAVL,KADa,CAAb;;AAcAG,YAAQC,GAAR,CAAYlB,KAAKmB,MAAL,CAAY,iCAAZ,EAA+Cf,QAA/C,CAAZ;AACH,CAjBD;;AAmBAgB,OAAOC,OAAP,GAAiBnB,YAAjB","file":"RedisService.js","sourcesContent":["var ioRedis = require('ioredis');\r\nvar util = require('util');\r\nvar config = require('../common/Config.js');\r\n\r\nvar RedisService = function(){};\r\n\r\nRedisService.Init = function(workerId){\r\n\r\n    this.redis = new ioRedis(\r\n    {\r\n        port: config.redisConfig.redisPort,\r\n        host: config.redisConfig.redisHost,\r\n        //password: config.redisConfig.redisPassword,\r\n        db: 0,\r\n\r\n        retryStrategy: function (times) {\r\n            var delay = Math.min(times * 2, 2000);\r\n            console.log(delay);\r\n            return delay;\r\n        }\r\n    });\r\n\r\n    console.log(util.format(\"## [%d worker] redis started ##\", workerId));\r\n}\r\n\r\nmodule.exports = RedisService;\r\n"]}